<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: finite_state_machine Pages: 1 -->
<svg width="1796pt" height="179pt"
 viewBox="0.00 0.00 1796.05 179.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 175)">
<title>finite_state_machine</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-175 1792.05,-175 1792.05,4 -4,4"/>
<!-- up -->
<g id="node1" class="node">
<title>up</title>
<ellipse fill="none" stroke="black" cx="277.19" cy="-82" rx="27" ry="18"/>
<text text-anchor="middle" x="277.19" y="-78.3" font-family="Times,serif" font-size="14.00">up</text>
</g>
<!-- up&#45;&gt;up -->
<g id="edge9" class="edge">
<title>up&#45;&gt;up</title>
<path fill="none" stroke="black" d="M260.21,-96.04C253.86,-106.91 259.52,-118 277.19,-118 289.34,-118 295.81,-112.76 296.61,-105.95"/>
<polygon fill="black" stroke="black" points="299.96,-104.92 294.17,-96.04 293.16,-106.59 299.96,-104.92"/>
<text text-anchor="middle" x="277.19" y="-121.8" font-family="Times,serif" font-size="14.00">R(up to failed)</text>
</g>
<!-- update_start -->
<g id="node2" class="node">
<title>update_start</title>
<ellipse fill="none" stroke="black" cx="608.69" cy="-82" rx="69.59" ry="18"/>
<text text-anchor="middle" x="608.69" y="-78.3" font-family="Times,serif" font-size="14.00">update_start</text>
</g>
<!-- up&#45;&gt;update_start -->
<g id="edge1" class="edge">
<title>up&#45;&gt;update_start</title>
<path fill="none" stroke="black" d="M304.32,-82C352.3,-82 456.16,-82 528.93,-82"/>
<polygon fill="black" stroke="black" points="528.99,-85.5 538.99,-82 528.99,-78.5 528.99,-85.5"/>
<text text-anchor="middle" x="399.69" y="-85.8" font-family="Times,serif" font-size="14.00">U(up to update_start)</text>
</g>
<!-- update_acknowledged -->
<g id="node3" class="node">
<title>update_acknowledged</title>
<ellipse fill="none" stroke="black" cx="1123.28" cy="-48" rx="113.18" ry="18"/>
<text text-anchor="middle" x="1123.28" y="-44.3" font-family="Times,serif" font-size="14.00">update_acknowledged</text>
</g>
<!-- update_start&#45;&gt;update_acknowledged -->
<g id="edge2" class="edge">
<title>update_start&#45;&gt;update_acknowledged</title>
<path fill="none" stroke="black" d="M649.92,-67.48C675.41,-59.06 709.29,-49.3 740.19,-45 831.68,-32.28 936.69,-34.29 1013.44,-38.76"/>
<polygon fill="black" stroke="black" points="1013.41,-42.26 1023.61,-39.38 1013.84,-35.28 1013.41,-42.26"/>
<text text-anchor="middle" x="866.19" y="-48.8" font-family="Times,serif" font-size="14.00">AV(update_start to update_ack)</text>
</g>
<!-- update_rejected -->
<g id="node5" class="node">
<title>update_rejected</title>
<ellipse fill="none" stroke="black" cx="1123.28" cy="-120" rx="85.29" ry="18"/>
<text text-anchor="middle" x="1123.28" y="-116.3" font-family="Times,serif" font-size="14.00">update_rejected</text>
</g>
<!-- update_start&#45;&gt;update_rejected -->
<g id="edge3" class="edge">
<title>update_start&#45;&gt;update_rejected</title>
<path fill="none" stroke="red" d="M675.39,-76.74C751.9,-71.86 881.88,-67.47 992.19,-83 1018.13,-86.65 1046.17,-94.15 1069.55,-101.44"/>
<polygon fill="red" stroke="red" points="1068.67,-104.84 1079.26,-104.55 1070.8,-98.17 1068.67,-104.84"/>
<text text-anchor="middle" x="866.19" y="-86.8" font-family="Times,serif" font-size="14.00">AV(update_start to update_ack)</text>
</g>
<!-- update_inprogress -->
<g id="node4" class="node">
<title>update_inprogress</title>
<ellipse fill="none" stroke="black" cx="1691.21" cy="-18" rx="96.68" ry="18"/>
<text text-anchor="middle" x="1691.21" y="-14.3" font-family="Times,serif" font-size="14.00">update_inprogress</text>
</g>
<!-- update_acknowledged&#45;&gt;update_inprogress -->
<g id="edge4" class="edge">
<title>update_acknowledged&#45;&gt;update_inprogress</title>
<path fill="none" stroke="black" d="M1230.73,-42.36C1333.04,-36.93 1486.6,-28.79 1587.61,-23.44"/>
<polygon fill="black" stroke="black" points="1588.02,-26.92 1597.82,-22.9 1587.65,-19.93 1588.02,-26.92"/>
<text text-anchor="middle" x="1415.37" y="-44.8" font-family="Times,serif" font-size="14.00">A(update_ack to update_inprogress) promote</text>
</g>
<!-- update_inprogress&#45;&gt;up -->
<g id="edge5" class="edge">
<title>update_inprogress&#45;&gt;up</title>
<path fill="none" stroke="black" d="M1597.35,-13.54C1427.14,-6.34 1053.83,4.96 740.19,-17 579.87,-28.22 390.53,-61.1 313.47,-75.32"/>
<polygon fill="black" stroke="black" points="312.54,-71.93 303.35,-77.2 313.82,-78.81 312.54,-71.93"/>
<text text-anchor="middle" x="866.19" y="-20.8" font-family="Times,serif" font-size="14.00">R(update done)</text>
</g>
<!-- update_rejected&#45;&gt;up -->
<g id="edge7" class="edge">
<title>update_rejected&#45;&gt;up</title>
<path fill="none" stroke="black" d="M1048.42,-128.67C1030.08,-130.47 1010.44,-132.09 992.19,-133 694.44,-147.84 611.62,-172.45 322.19,-101 317.71,-99.89 313.1,-98.37 308.63,-96.67"/>
<polygon fill="black" stroke="black" points="309.76,-93.35 299.18,-92.74 307.07,-99.81 309.76,-93.35"/>
<text text-anchor="middle" x="608.69" y="-152.8" font-family="Times,serif" font-size="14.00">S(abort update) clear candidate</text>
</g>
<!-- update_rejected&#45;&gt;update_start -->
<g id="edge10" class="edge">
<title>update_rejected&#45;&gt;update_start</title>
<path fill="none" stroke="black" d="M1039.44,-116.77C961.97,-113.39 843.1,-107.26 740.19,-98 720.83,-96.26 699.91,-93.9 680.61,-91.54"/>
<polygon fill="black" stroke="black" points="681.04,-88.06 670.68,-90.3 680.18,-95.01 681.04,-88.06"/>
<text text-anchor="middle" x="866.19" y="-117.8" font-family="Times,serif" font-size="14.00">U(update_rejected to start_update)</text>
</g>
<!-- update_rejected&#45;&gt;update_rejected -->
<g id="edge6" class="edge">
<title>update_rejected&#45;&gt;update_rejected</title>
<path fill="none" stroke="black" d="M1079.51,-135.54C1067.19,-145.91 1081.78,-156 1123.28,-156 1151.81,-156 1167.62,-151.23 1170.72,-144.88"/>
<polygon fill="black" stroke="black" points="1173.96,-143.57 1167.05,-135.54 1167.45,-146.13 1173.96,-143.57"/>
<text text-anchor="middle" x="1123.28" y="-159.8" font-family="Times,serif" font-size="14.00">R(upd_reject failed)</text>
</g>
<!-- rollback -->
<g id="node6" class="node">
<title>rollback</title>
<ellipse fill="none" stroke="black" cx="48.1" cy="-82" rx="48.19" ry="18"/>
<text text-anchor="middle" x="48.1" y="-78.3" font-family="Times,serif" font-size="14.00">rollback</text>
</g>
<!-- rollback&#45;&gt;up -->
<g id="edge8" class="edge">
<title>rollback&#45;&gt;up</title>
<path fill="none" stroke="black" d="M96.43,-82C139.08,-82 200.9,-82 239.8,-82"/>
<polygon fill="black" stroke="black" points="240.13,-85.5 250.13,-82 240.13,-78.5 240.13,-85.5"/>
<text text-anchor="middle" x="173.19" y="-85.8" font-family="Times,serif" font-size="14.00">R(rollback done)</text>
</g>
</g>
</svg>
